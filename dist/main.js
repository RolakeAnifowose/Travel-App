!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"handleSubmit",(function(){return o}));function o(e){e.preventDefault();const t=document.getElementById("zip").value,n=document.getElementById("departureDate").value,o=function(e,t){let n=new Date(e),o=new Date(t),r=n.getTime(),a=o.getTime()-r;return Math.round(a/864e5)}(n,document.getElementById("returnDate").value),i=function(e){let t=new Date(e).getTime(),n=(new Date).getTime(),o=Math.abs(t-n);return Math.round(o/864e5)}(n);r("http://api.geonames.org/postalCodeSearchJSON?",t,"rolake").then((function(e){try{let n=e[0];console.log(n),a("https://api.weatherbit.io/v2.0/current?",t,"92010b4cd42d48db92d5475ca3a969d8").then((function(e){console.log("Weather Response for ",t),console.log("Weather data is"+JSON.stringify(e));try{document.getElementById("departureDate").value,document.getElementById("returnDate").value;document.getElementById("location").innerHTML="Destination: "+t,document.getElementById("tripLength").innerHTML="Trip length: "+o+" days",document.getElementById("daysAway").innerHTML="Your trip is "+i+" days away",document.getElementById("temp").innerHTML="Temperature: Max "+e.data[0].high_temp+" Min "+weatherResponse.low;const r={destination:n.placeName,country:n.countryCode,latitude:n.lat,longitude:n.lng,departure:date};l("http://localhost:8000/addWeather",r)}catch(e){console.log(e)}})),c("https://pixabay.com/api?",t,"16474757-58135d921de29d80734653c8b").then((function(e){document.getElementById("image").src=e.hits[0].webformatURL,console.log("hi")}))}catch(e){console.log("Error",e)}}))}document.getElementById("generate").addEventListener("click",o);const r=async(e,t,n)=>{console.log("Calling Geonames API");const o=await fetch(`${e}placename=${t}&maxRows=1&username=${n}`);try{return await o.json}catch(e){console.log("Error",e)}},a=async(e,t,n)=>{const o=await fetch(`${e}&city=${t}&key=${n}`);try{return await o.json}catch(e){console.log("Error",e)}},c=async(e,t,n)=>{const o=await fetch(`${e}key=${n}&q=destination+${t}&image_type=photo`);try{const e=await o.json();return console.log(e),e}catch(e){console.log("Error",e)}};let l=async(e="",t={})=>{const n=await fetch(e,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"http://localhost:8000/"},body:JSON.stringify(t)});try{return await n.json()}catch(e){console.log("Error",e)}};n(0);document.getElementById("generate").addEventListener("click",o),console.log("Morolake Anifowose")}]);
//# sourceMappingURL=main.js.map